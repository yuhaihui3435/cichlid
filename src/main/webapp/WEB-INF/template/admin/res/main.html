<%layout("/admin/_layout.html"){%>

<div class="content-wrapper">
    <section class="content-header">
        <h1>
            角色权限信息
            <small>管理</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="/admin"><i class="fa fa-dashboard"></i>Home</a></li>
            <li class="active">主窗体</li>
        </ol>
    </section>
    <section class="content">
        <div class="row">
            <div class="col-md-4">
                <div class="box box-success">
                    <div class="box-header">
                        <h4>角色列表</h4>
                    </div>
                    <div class="box-body">
                        <p class="toolbar">
                            <a class="create btn btn-success" href="javascript:">新增角色</a>
                            <a class="del btn btn-danger" href="javascript:">删除角色</a>
                        </p>
                        <table id="table" data-content-type="application/x-www-form-urlencoded"
                               data-toggle="table"
                               data-url="/adminRole/list"

                               data-show-columns="true"
                               data-side-pagination="server"
                               data-show-refresh="true"
                               data-pagination="true"
                               data-toolbar=".toolbar"
                               data-search="true" data-method="POST">
                            <thead>
                            <tr>
                                <th data-field="state" data-checkbox="true"></th>
                                <th data-field="id" data-visible></th>
                                <th data-field="name" data-editable="true" data-editable-emptytext="名称不能为空">名称</th>
                                <th data-field="description" data-editable="true" data-editable-emptytext="暂无内容">描述</th>
                                <th data-field="action"
                                    data-align="center"
                                    data-formatter="actionFormatter"
                                    data-events="actionEvents">操作
                                </th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-4" >
                <div  id="filpTree">
                    <div class="box box-success front">
                        <div class="box-header">
                            <h4>权限树</h4>
                        </div>
                        <div class="box-body">
                            <ul id="resTree" class="ztree"></ul>
                        </div>

                    </div>
                    <div class="box box-success back">
                        <div class="box-header"><h4>角色绑定的权限树</h4></div>
                        <div class="box-body">
                            <ul id="resTreeBindRole" class="ztree"></ul>
                        </div>
                        <div class="box-footer">
                            <button type="button" class="btn btn-success" id="saveRes">保存</button>
                            <button type="button" class="btn" id="backToFront">返回</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <form id="resForm">
                    <div class="box box-success" id="box-form" style="display: none;">
                        <div class="box-header">
                            <h4 id="box-header-txt"></h4>
                        </div>
                        <div class="box-body">

                            <input type="hidden" id="pId" name="res.pid">
                            <input type="hidden" id="id" name="res.id">
                            <div class="form-group" id="pDiv" style="display: none"><label>上级名称:</label>
                                <span id="pName"></span>
                            </div>
                            <div class="form-group"><label>名称<span class="required">*</span></label><input
                                    class="form-control"
                                    type="text" id="name"
                                    name="res.name" maxlength="100"
                            />
                            </div>
                            <div class="form-group"><label>URL<span class="required">*</span></label><input
                                    class="form-control"
                                    type="text" id="url"
                                    name="res.url" maxlength="255"
                            />
                            </div>
                            <div class="form-group"><label>描述</label><input
                                    class="form-control"
                                    type="text" id="description"
                                    name="res.description" maxlength="100"
                            />
                            </div>
                            <div class="form-group"><label>顺序号</label><input
                                    class="form-control"
                                    type="text" id="seq"
                                    name="res.seq" max="100"
                            />
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="radio" name="res.logged" class="flat-red" value="0" checked>
                                    记录日志
                                </label>
                                <label>
                                    <input type="radio" name="res.logged" class="flat-red" value="1">
                                    不记录日志
                                </label>
                            </div>

                        </div>
                        <div class="box-footer">
                            <button type="submit" id="btn" class="btn btn-success">保存</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <div id="rMenu">
        <ul>
            <li id="m_add" onclick="addTreeNode();">增加</li>
            <li id="m_edit" onclick="editTreeNode();">编辑</li>
            <li id="m_del" onclick="delTreeNode();">删除</li>
        </ul>
    </div>
</div>
<%include("/admin/res/roleForm.html"){}%>
<script src="/static/js/role_res.js"></script>
<%}%>